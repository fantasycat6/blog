# 无线安全环境搭建

## 1.802.11标准

### 1.概念

802.11标准是1997年IEEE最初制定的一个WLAN标准，工作在2.4GHz开放频段，支持1Mbit/s和2Mbit/s的数据传输速率，定义了物理层和MAC层规范，允许无线局域网及无线设备制造商建立互操作网络设备。基于IEEE802.11系列的WLAN标准已包括共21个标准，其中802.11a、802.11b和802.11g最具代表性.

简单来说：IEEE提出的，是工作在数据链路层的无线协议。

### 2. 802.11标准和补充 

802.11 ,1997年,原始标准(2Mbit/s,2.4GHZ频道)。  

802.11a,1999年,物理层补充(54Mbit/s,5GHz频道)。  

802.11b,1999年,物理层补充(11Mbit/s,2.4GHZ频道)。  

802.11c,符合802.1D的媒体接入控制层(MAC)桥接(MAC Layer Bridging)。  

802.11d,根据各国无线电规定做的调整。　 

802.11e ,对服务等级(Quality of Service, QoS)的支持。  

802.11f,基站的互连性(Interoperability)。  

802.11g,物理层补充(54Mbit/s,2.4GHZ频道)。  

802.11h,无线覆盖半径的调整,室内(indoor)和室外(outdoor)信道(5GHz频段)。  

802.11i,安全和鉴权(Authentification)方面的补充。  

802.11n,导入多重输入输出(MIMO)和40Mbit信道宽度(HT40)技术,基本上是802.11a/g的延伸版。

## 2.WiFi标准

是由wifi联盟提出的一个802.11标准的一个子集，wifi联盟保证了各种不同的无线产品能一起工作。

目前wifi主流应用的协议

![802-11](https://image.201068.xyz/assets/802-11.png)

## 3.无线接入点AP(Access Point)

### 1.概念

无线AP（Access Point）：即无线接入点，它用于无线网络的无线交换机，也是无线网络的核心。无线AP是移动计算机用户进入有线网络的接入点，主要用于宽带家庭、大楼内部以及园区内部，可以覆盖几十米至上百米。无线AP（又称会话点或存取桥接器）是一个包含很广的名称，它不仅包含单纯性无线接入点（无线AP），同样也是无线路由器（含无线网关、无线网桥）等类设备的统称。

### 2.AP的分类

无线AP通常可以分为胖AP（Fat AP）和瘦AP（Fit AP）两类，不是以外观来分辨的，而是从其工作原理和功能上来区分。当然，部分胖、瘦AP在外观上确实能分辨，比如有WAN口的一定是胖AP。 

#### 1.胖AP

胖AP除了前面提到的无线接入功能外，一般还同时具备WAN、LAN端口，支持DHCP服务器、DNS和MAC地址克隆、VPN接入、防火墙等安全功能。胖AP通常有自带的完整操作系统，是可以独立工作的网络设备，可以实现拨号、路由等功能，一个典型的例子就是我们常见的无线路由器。

胖AP简单理解就是带管理功能的AP，胖AP就是自己带有管理功能同时又广播SSID还连接终端的AP，属于麻雀虽小 五脏俱全类型的。 

![胖AP或者路由](https://image.201068.xyz/assets/胖AP或者路由.png)

#### 2.瘦AP

痩AP则是不带管理功能的，简单可以把它理解为一个信号发送与接收的天线，它的管理功能由后端的，我们叫无线控制器（AC)来完成。

瘦AP就不能自管理了，需要AC来管理，瘦AP只负责广播SSID和连接终端；一般超小规模组网用胖AP，稍微大一点就用瘦AP了。

这么做的原因主要是在无线路由器很多的情况下，大企业部署一个园区的无线覆盖，有几百个无线路由器是很正常的，但是管理起来就很麻烦了，总不可能像家用路由器一个一个去配置吧，所有由AC进行统一管理要方便和高效的多。

![瘦AP](https://image.201068.xyz/assets/瘦AP.png)

#### 3.用途的区别

胖AP：类似于家用无线路由器，具有三层路由功能.( 多用于家庭)

瘦AP：仅仅类似于以太网集线器，用于转换电信号和无线信号（多用于企业）

## 4.客户端 STA

连接到AP或者路由器上的设备，就叫做这个AP或者路由器的客户端。比如说 手机，电脑等等

## 5.无线局域网AP术语介绍

**SSID**： 服务集标识即wifi名称

**BSSID**：AP的2层地址（AP的MAC地址）

**ESSID**：扩展服务集标识，一般情况下等同于SSID。当同一家公司的多个AP组成了一个网络时，整个网络名称就是ESSID。他下边所有AP的名字都是相同的。

**工作模式**：802.11 b/g/n/  a/n/ac(5G)  向下兼容

**信道（channel）**：发送方和接收方期望载波的频率是固定的，并在特殊性定的范围内变化，这种范围称为信道，WLAN信道是由当前使用的802.11标准决定的。

![信道](https://image.201068.xyz/assets/信道.png)

## 6.无线网卡的工作模式

### 1.Managed Mode

被管理模式(Managed mode)：当你的无线客户端直接与无线接入点（Wireless Access Point，WAP）连接时，就使用这个模式。在这个模式中，无线网卡的驱动程序依赖WAP管理整个通信过程。

![被管理模式](https://image.201068.xyz/assets/被管理模式.png)

### 2.Ad Hoc

当你的网络由互相直连的设备组成时，就使用这个模式。在这个模式中，无线通信双方共同承担WAP的职责。

![ad-hoc模式](https://image.201068.xyz/assets/ad-hoc模式.png)

### 3.Master Mode

一些高端无线网卡还支持主模式。这个模式允许无线网卡使用特制的驱动程序和软件工作，作为其他设备的WAP。比如说猎豹免费wifi 

![主模式](https://image.201068.xyz/assets/主模式.png)

### 4.Monitor Mode 

就我们的用途而言，这是最重要的模式。当你希望无线客户端停止收发数据，专心监听空气中的数据包时，就使用监听模式。要使Wireshark捕获无线数据包，你的无线网卡和配套驱动程序必须支持监听模式（也叫RFMON模式）

![监听模式](https://image.201068.xyz/assets/监听模式.png)

## 5.无线渗透的环境搭建

### 1.kali linux

​	下载安装kali虚拟机

​	 官网：https://www.kali.org/

### 2.usb的网卡 

​	推荐使用 RTL8187 ，RT3070或者WiFi联盟的 kali内置了驱动，被无线安全的人广泛使用。 

### 3.设置无线网卡连接到虚拟机

1.我的电脑--右键--管理--服务和应用程序--服务--VMUSBArbService 选择启动

![启动虚拟机usb服务](https://image.201068.xyz/assets/启动虚拟机usb服务.png)

2.启动卡里虚拟机--插入usb网卡

3.虚拟机--可移动设备--选择无线网卡--选择链接（断开于主机的链接）

4.输入ip a  查看网卡是否被识别

![无线网卡确认](https://image.201068.xyz/assets/无线网卡确认.png)

```
如果状态是down，执行：
ifconfig eth2 up

如果一直down状态，多重连几次
```



## 6.课堂小结

参考：无线安全环境搭建-课后笔记.xmind